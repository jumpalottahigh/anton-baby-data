<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Anton Data Monitor</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

  <style>

  </style>
</head>

<body>

  <section>
    <div class="container text-center">
      <div class="row">
        <h1 class="text-primary">Anton Data Monitor</h1>
      </div>
    </div>
  </section>

  <section>
    <div class="container text-center">
      <div class="row">
        <h2>Active events</h2>
        <p class="text-success">Sleeping</p>
        <div></div>
      </div>
    </div>
  </section>

  <section>
    <div class="container text-center">
      <div class="row">
        <h2>Add event</h2>
      </div>
      <div class="row">
        <button id="btnFeed" class="btn btn-info col-xs-2 col-xs-offset-1">Feed</button>
        <button id="btnPee" class="btn btn-success col-xs-2">Pee</button>
        <button id="btnPoop" class="btn btn-warning col-xs-2">Poop</button>
        <div class="col-xs-2">
          <button id="btnSleepStart" class="btn btn-primary col-xs-12">Sleep Start</button>
          <br>
          <button id="btnSleepEnd" class="btn btn-primary col-xs-12" disabled>Sleep End</button>
        </div>
        <div class="col-xs-2">
          <button id="btnRageStart" class="btn btn-danger col-xs-12">Rage Start</button>
          <br>
          <button id="btnRageEnd" class="btn btn-primary col-xs-12" disabled>Rage End</button>
        </div>
      </div>
      <div class="row">
        <label for="textExtra">Extra info</label>
        <input id="textExtra" type="text" placeholder="eg. weight">
        <button id="btnSaveExtra" class="btn btn-primary">Save</button>
      </div>
      <div class="row">
        <div id="status" class="alert alert-info alert-dismissible" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <p>
            Hi. Click a button when event happens :)
          </p>
        </div>
      </div>
    </div>
  </section>

  <section>
    <div class="container text-center">
      <div class="row">
        <h2>All data</h2>
      </div>
      <div class="row">

      </div>
    </div>
  </section>

  <!-- Add Firebase -->
  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

  <script>
    var myDataRef = new Firebase('https://fzqsxs40yhi.firebaseio-demo.com/');

    //Initiate and construct current day object
    var date = new Date();
    var dateString = '';
    dateString = date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();

    var currentDay = {};
    currentDay[dateString] = {
      "feeding": [],
      "pee": [],
      "poop": []
    };

    //Set in Firebase
    //not needed
    // myDataRef.set(currentDay);

    /////////
    //Helpers
    /////////

    //Returns current time in this format: '13:35'
    function getCurrentTime() {
      var date = new Date();
      var currentTime = '';
      currentTime = date.getHours() + ':' + date.getMinutes();

      return currentTime;
    }

    //UI
    $('#btnFeed').click(function() {
      //get current time
      // var currentTime = getCurrentTime();

      //TODO
      //or specify time from input field

      //push to db
      currentDay[dateString].feeding.push(getCurrentTime());
      myDataRef.update(currentDay);
    });

    $('#btnPee').click(function() {
      currentDay[dateString].pee.push(getCurrentTime());
      myDataRef.update(currentDay);
    });

    $('#btnPoop').click(function() {
      currentDay[dateString].poop.push(getCurrentTime());
      myDataRef.update(currentDay);
    });

  </script>
</body>

</html>
